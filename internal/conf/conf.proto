syntax = "proto3";

package internal.conf;

import "google/protobuf/duration.proto";
import "config/config.proto";
import "enum/enum.proto";

option go_package = "github.com/aide-family/rabbit/internal/conf;conf";

message Bootstrap {
	rabbit.enum.Environment environment = 1;
	Server server = 2;
	GlobalEmail globalEmail = 3;
	JWT jwt = 4;
	map<string, rabbit.config.MySQLConfig> biz = 5;
	rabbit.config.MySQLConfig main = 6;
	EventBus eventBus = 7;
	rabbit.config.ClusterConfig cluster = 8;
	rabbit.config.RegistryType registryType = 9;
	rabbit.config.ETCDConfig etcd = 10;
	rabbit.config.KubernetesConfig kubernetes = 11;
	rabbit.config.BasicAuthConfig swaggerBasicAuth = 12;
	rabbit.config.BasicAuthConfig metricsBasicAuth = 13;
	string enableClientConfig = 14;
	string enableSwagger = 15;
	string enableMetrics = 16;
}


message Server {
	message HTTPServer {
		string address = 1;
		string network = 2;
		google.protobuf.Duration timeout = 3;
	}
	
	message GRPCServer {
		string address = 1;
		string network = 2;
		google.protobuf.Duration timeout = 3;
	}
	
	string name = 1;
	map<string, string> metadata = 2;
	HTTPServer http = 3;
	GRPCServer grpc = 4;
	string useRandomID = 5;
}

message GlobalEmail {
	string host = 1;
	int32 port = 2;
	string username = 3;
	string password = 4;
}

message JWT {
	string secret = 1;
	google.protobuf.Duration expire = 2;
	string issuer = 3;
}

message EventBus {
	int32 workerCount = 1;
	google.protobuf.Duration timeout = 2;
}