syntax = "proto3";

package internal.conf;

import "google/protobuf/duration.proto";

option go_package = "github.com/aide-family/rabbit/internal/conf;conf";

message Bootstrap {
	Environment environment = 1;
	Server server = 2;
	repeated Cluster clusters = 3;
	GlobalEmail global_email = 4;
}

enum Environment {
	UNKNOWN = 0;
	DEV = 1;
	TEST = 2;
	PREVIEW = 3;
	PROD = 4;
}

message Server {
	message HTTPServer {
		string address = 1;
		string network = 2;
		google.protobuf.Duration timeout = 3;
	}
	
	message GRPCServer {
		string address = 1;
		string network = 2;
		google.protobuf.Duration timeout = 3;
	}
	
	string name = 1;
	map<string, string> metadata = 2;
	HTTPServer http = 3;
	GRPCServer grpc = 4;
}

message Cluster {
	enum Protocol {
		GRPC = 0;
		HTTP = 1;
	}
	string name = 1;
	string endpoint = 2;
	Protocol protocol = 3;
	google.protobuf.Duration timeout = 4;
	string secret = 5;
}

message GlobalEmail {
	string host = 1;
	int32 port = 2;
	string username = 3;
	string password = 4;
}